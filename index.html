<html>
  <head>
    <meta charset="utf-8" />
    <title></title>
    <link
      rel="icon"
      href="https://artscity.io/wp-content/uploads/2022/02/cropped-arts-city-logo-icon-city-192x192.png"
      sizes="192x192"
    />

    <meta name="description" content="360&deg; Image Gallery - A-Frame" />
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@5/dist/aframe-event-set-component.min.js"></script>
    <script src="https://unpkg.com/aframe-layout-component@5.3.0/dist/aframe-layout-component.min.js"></script>
    <script src="https://unpkg.com/aframe-template-component@3.2.1/dist/aframe-template-component.min.js"></script>
    <script src="https://unpkg.com/aframe-proxy-event-component@2.1.0/dist/aframe-proxy-event-component.min.js"></script>
    <script src="https://unpkg.com/aframe-vr-mode-watcher@1.0.0/dist/aframe-vr-mode-watcher.min.js"></script>

    <!-- Image link template to be reused. -->
    <script id="link" type="text/html">
      <a-entity class="link"
        geometry="primitive: plane; height: 1; width: 1"
        material="shader: flat; src: ${thumb}"
        event-set__mouseenter="scale: 1.2 1.2 1"
        event-set__mouseleave="scale: 1 1 1"
        event-set__click="_target: #image-360; _delay: 300; material.src: ${src}"
        proxy-event="event: click; to: #image-360; as: fade"
        sound="on: click; src: #click-sound"
      >      </a-entity>
    </script>

    <script id="portal" type="text/html">
      <a-entity class="portal"
        event-set__mouseenter="scale: 1.2 1.2 1"
        event-set__mouseleave="scale: 1 1 1"
        event-set__click="_target: #image-360; _delay: 300; material.src: ${src}"
        proxy-event="event: click; to: #image-360; as: fade"
      >      </a-entity>
    </script>




    <script>
      //var datetime = new Date().toLocaleTimeString();
      document.title = "Arts City";
    </script>
  </head>
  <body>
    <a-scene>
      <a-assets>
        <img
          id="city"
          crossorigin="anonymous"
          src="https://cdn.aframe.io/360-image-gallery-boilerplate/img/city.jpg"
        />
        <img
          id="city-thumb"
          crossorigin="anonymous"
          src="https://cdn.aframe.io/360-image-gallery-boilerplate/img/thumb-city.jpg"
        />
        <img
          id="cubes-thumb"
          crossorigin="anonymous"
          src="https://cdn.aframe.io/360-image-gallery-boilerplate/img/thumb-cubes.jpg"
        />
        <img
          id="sechelt-thumb"
          crossorigin="anonymous"
          src="https://cdn.aframe.io/360-image-gallery-boilerplate/img/thumb-sechelt.jpg"
        />
        <audio
          id="click-sound"
          crossorigin="anonymous"
          src="https://cdn.aframe.io/360-image-gallery-boilerplate/audio/click.ogg"
        ></audio>
        <img
          id="cubes"
          crossorigin="anonymous"
          src="https://cdn.aframe.io/360-image-gallery-boilerplate/img/cubes.jpg"
        />
        <img
          id="sechelt"
          crossorigin="anonymous"
          src="https://cdn.aframe.io/360-image-gallery-boilerplate/img/sechelt.jpg"
        />
        <img
          id="button-goback"
          crossorigin="anonymous"
          src="https://res.cloudinary.com/artscity-io/image/upload/v1648322640/button-go-back_rtexou.jpg"
        />
        <img
          id="button-resume"
          crossorigin="anonymous"
          src="https://res.cloudinary.com/artscity-io/image/upload/v1648322640/button-resume-tour_pp5rja.jpg"
        />
        <img
          id="camile"
          crossorigin="anonymous"
          src="https://res.cloudinary.com/artscity-io/image/upload/v1648323231/camile_esy7cy.jpg"
        />
        <img
          id="artscity"
          crossorigin="anonymous"
          src="https://res.cloudinary.com/artscity-io/image/upload/v1648322641/artscity_daytcq.jpg"
        />
      </a-assets>

      <!-- 360-degree image. -->
      <a-sky
        id="image-360"
        radius="10"
        src="#artscity"
        rotation="0 60 0"
        animation__fade="property: components.material.material.color; type: color; from: #FFF; to: #000; dur: 300; startEvents: fade"
        animation__fadeback="property: components.material.material.color; type: color; from: #000; to: #FFF; dur: 300; startEvents: animationcomplete__fade"
      ></a-sky>



      <!-- museum -->
      <a-entity
        id="museum"
        layout="margin: 0"
        position="-1 0.25 -9"
        visible="true"
        rotation="0 8 0"
        scale="1.5 1.5"
      >
        <a-plane
          color="#000"
          height="0.75"
          width="2"
          position="10 0 -10"
        ></a-plane>
        <a-entity
          text="value: The CryptoArt Museum; color: #fff; align: center; width:3; vertical-align: top;"
          position="5 0.0 5"
          layout="margin: 10"
          width="5"
        ></a-entity>
      </a-entity>

      <!-- venue -->
      <a-entity
        id="venue"
        layout="margin: 0"
        position="-3.9 -1.5 -3.4"
        visible="true"
        rotation="0 65 0"
        
      >

      
        <a-plane
          color="#000"
          height="0.75"
          width="1.5"
          position="10 0 -10"
        class="portal"
                  data-src="#cubes"
                   event-set__mouseenter="scale: 1.2 1.2 1"
        event-set__mouseleave="scale: 1 1 1"
                event-set__click="_target: #image-360; _delay: 300; material.src: #cubes"

           proxy-event="event: click; to: #image-360; as: fade"
        sound="on: click; src: #click-sound"
               

        ></a-plane>
        <a-entity
          text="value: Camile's Venue; color: #fff; align: center; width:3; vertical-align: top;"
          position="0 0 0"
          layout="margin: 10"
          width="4"
        ></a-entity>
 

        
      </a-entity>




      <!-- gallery -->
      <a-entity
        id="gallery"
        layout="margin: 0"
        position="-1.12 -1.48 7.244"
        visible="true"
        rotation="0 165 0"
      >
        <a-plane
          color="#000"
          height="0.75"
          width="2"
          position="10 0 -10"
        ></a-plane>
        <a-entity
          text="value: Metamodern Art Gallery; color: #fff; align: center; width:4; vertical-align: top;"
          position="5 0.0 5"
          layout="margin: 10"
          width="6"
        ></a-entity>
      </a-entity>

        <a-entity
          template="src: #link"
          data-src="#city"
          data-thumb="#city-thumb"
        ></a-entity>
      </a-entity>

      <!-- camile -->
      <a-entity position="-.25 .8 -4">
        <a-plane
          color="#CCC"
          height="0.75"
          width="2.5"
          position=".25 0 2.5"
        ></a-plane>
        <a-entity
          template="src: #link"
          data-src="#sechelt"
          data-thumb="#camile"
          scale="0.5 0.5"
          position="-.65 0 2.6"
        ></a-entity>
        <a-entity
          text="value: Hello, welcome to ArtsCity - The Arts' Metaverse. My name is Camile, and I am your host today.  Please feel free to walk around.; color: #000"
          position=".45 .015 2.6"
          scale="1.5 1.5 1.5"
        >
        </a-entity>
      </a-entity>

      <!-- Camera + cursor. --dutration: 9000-from: 0 5.5 5; to: 0 2.6 -4; -->
      <a-entity
        id="camera-rig"
        animation="property: position; from: 0 8 0; to: 0 0.0 0;  dur: 6001; easing: linear; loop: false"
      >
        
        <a-entity camera look-controls>
          <a-cursor
            id="cursor"
            animation__click="property: scale; startEvents: click; from: 0.1 0.1 0.1; to: 1 1 1; dur: 150"
            animation__fusing="property: fusing; startEvents: fusing; from: 1 1 1; to: 0.1 0.1 0.1; dur: 1500"
            event-set__mouseenter="_event: mouseenter; color: springgreen"
            event-set__mouseleave="_event: mouseleave; color: black"
            raycaster="objects: .link, .portal, .chat"
          ></a-cursor>
          
        </a-entity>
      </a-entity>
    </a-scene>
  </body>
  <script>
    /* var camera_rig = document.querySelector('#camera-rig');
      camera_rig.setAttribute('position', 'x', 0);
      camera_rig.setAttribute('position', 'y', 2);
      camera_rig.setAttribute('position', 'z', 4);*/

    AFRAME.registerComponent("scenelistener", {
      init: function () {
        let vrcam = document.querySelector("#cam-vr");
        let dcam = document.querySelector("#cam-desktop");
        let cursor = document.querySelector("[cursor]");
        console.clear(); /*from   ww  w.de mo  2  s .c  o m*/
        console.log("init");
        console.log("vrcam:");
        console.log(vrcam);
        console.log("dcam:");
        console.log(dcam);
        console.log("cursor:");
        console.log(cursor);
        this.el.sceneEl.addEventListener("enter-vr", function () {
          cursor.setAttribute("visible", true);
          dcam.setAttribute("camera", "active", false);
          vrcam.setAttribute("camera", "active", true);
        });
        this.el.sceneEl.addEventListener("exit-vr", function () {
          cursor.setAttribute("visible", false);
          dcam.setAttribute("camera", "active", true);
          vrcam.setAttribute("camera", "active", false);
        });
      },
    });
  </script>
</html>
